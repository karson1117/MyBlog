<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[hexo自动部署至VPS]]></title>
      <url>http://karson.cc/2017/03/03/webhook/</url>
      <content type="html"><![CDATA[<p>之前每次写好一篇博文后，都是傻傻的打包利用Xftp手动传至VPS中。简直就是一个字“low~”。自从利用webhook实现自动部署后，腰不酸了，腿不疼了，可以扛两袋米一口气上五楼了~o(￣▽￣)o~ (小装一波~)。</p>
<blockquote>
<p>最终实现：自己电脑上新建文章后，hexo clean &amp;&amp; hexo g -d 即可。<br>实现原理：<br>1.hexo 提交代码渲染后文件至远程仓库(coding)<br>2.coding中对应项目配置webhook发送执行请求<br>3.vps 接收指定请求执行脚本(拉取最新代码)<br><a id="more"></a></p>
</blockquote>
<p>操作分为本机上和vps上的操作。</p>
<h3 id="hexo本地配置及部署"><a href="#hexo本地配置及部署" class="headerlink" title="hexo本地配置及部署"></a>hexo本地配置及部署</h3><h4 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h4><blockquote>
<p>hexo是基于nodejs开发的，npm是nodejs的包管理工具<br>git用于部署代码<br>所以首页应确认本机环境：git，node.js环境<br>git,node.js安装可另查资料</p>
</blockquote>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#安装hexo命令行工具</span></div><div class="line">npm install hexo-cli -g</div><div class="line"><span class="meta">#创建blog目录，并初始化hexo项目</span></div><div class="line">hexo init blog</div><div class="line">cd blog</div><div class="line">hexo <span class="keyword">new</span> <span class="string">"My First Post"</span></div><div class="line"><span class="meta">#启动本地服务，查看效果</span></div><div class="line">hexo server</div></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux下防御/减轻DDOS攻击]]></title>
      <url>http://karson.cc/2017/03/03/ddos/</url>
      <content type="html"><![CDATA[<p>好久没管我的vps了，直到前天发现vpn居然用不了了，一脸懵逼。<br>登录后台就发现可能是被攻击了，导致被官方限制使用。<br><img src="/img/articleImg/vpsproblem.jpg" alt=""><br><a id="more"></a><br>被莫名的攻击后也是张二和尚摸不着头脑。<br>还能咋办叻?Goole~&amp;Baidu~<br>然后就开始了如下操作，也不知有没有用，O(∩_∩)O哈哈~</p>
<h2 id="DDoS-deflate介绍"><a href="#DDoS-deflate介绍" class="headerlink" title="DDoS deflate介绍"></a>DDoS deflate介绍</h2><blockquote>
<p>DDoS deflate是一款免费的用来防御和减轻DDoS攻击的脚本。它通过&gt;netstat监测跟踪创建大量网络连接的IP地址，在检测到某个结点超过<br>预设的限 制时，该程序会通过APF或IPTABLES禁止或阻挡这些IP.</p>
</blockquote>
<h3 id="如何确认是否受到DDOS攻击？"><a href="#如何确认是否受到DDOS攻击？" class="headerlink" title="如何确认是否受到DDOS攻击？"></a>如何确认是否受到DDOS攻击？</h3><p>由于我是直接重装了系统，所以这一步仅供参考<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -ntu | <span class="type">awk</span> '&#123;print $<span class="number">5</span>&#125;' | <span class="type">cut</span> -d: -f1 | <span class="type">sort</span> | <span class="type">uniq</span> -c | <span class="type">sort</span> -n</div></pre></td></tr></table></figure></p>
<p>据说：执行后，将会显示服务器上所有的每个IP多少个连接数。</p>
<h3 id="1-安装DDoS-deflate"><a href="#1-安装DDoS-deflate" class="headerlink" title="1.安装DDoS deflate"></a>1.安装DDoS deflate</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">wget http:<span class="comment">//www.inetbase.com/scripts/ddos/install.sh   //下载DDoS  deflate</span></div><div class="line">chmod <span class="number">0700</span> install<span class="selector-class">.sh</span>    <span class="comment">//添加权限</span></div><div class="line">./install<span class="selector-class">.sh</span>             <span class="comment">//执行</span></div></pre></td></tr></table></figure>
<h3 id="2-配置DDoS-deflate"><a href="#2-配置DDoS-deflate" class="headerlink" title="2.配置DDoS deflate"></a>2.配置DDoS deflate</h3><p>DDoS deflate的默认配置位于/usr/local/ddos/ddos.conf<br>内容如下<br><img src="/img/articleImg/ddosconf.png" alt=""></p>
<p>查看/usr/local/ddos/ddos.sh文件的第117行<br>(vim模式下 跳转命令：行号 即可)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -ntu | awk ‘&#123;<span class="built_in">print</span> <span class="variable">$5</span>&#125;’ | cut <span class="_">-d</span>: <span class="_">-f</span>1 | sort | uniq -c | sort -nr &gt; <span class="variable">$BAD_IP_LIST</span></div></pre></td></tr></table></figure><br>修改为以下代码即可！<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -ntu | <span class="type">awk</span> ‘&#123;print $<span class="number">5</span>&#125;’ | <span class="type">cut</span> -d: -f1 | <span class="type">sed</span> -n ‘/[<span class="number">0</span><span class="number">-9</span>]/p’ | <span class="type">sort</span> | <span class="type">uniq</span> -c | <span class="type">sort</span> -nr &gt; $BAD_IP_LIST</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[VPS安装及配置nginx]]></title>
      <url>http://karson.cc/2017/01/04/vps-install-nginx/</url>
      <content type="html"><![CDATA[<p>反向代理（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。<br><img src="/img/articleImg/nginx.jpg" alt=""><br><a id="more"></a></p>
<h2 id="环境确认"><a href="#环境确认" class="headerlink" title="环境确认"></a>环境确认</h2><p>系统环境：Centos 6<br>安装方式：源码编译安装 <a href="http://www.285868.com/a/xtjc/5635.html" target="_blank" rel="external">几种Linux软件的安装方法</a><br>安装位置：/usr/local/nginx</p>
<h2 id="安装前提"><a href="#安装前提" class="headerlink" title="安装前提"></a>安装前提</h2><p>在安装nginx前，需要确保系统安装了g++、gcc、openssl-devel、pcre-devel和zlib-devel软件。</p>
<h2 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h2><p>进入安装目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src</div></pre></td></tr></table></figure></p>
<h3 id="安装pcre-用于Nginx的HTTP-Rewrite-模块"><a href="#安装pcre-用于Nginx的HTTP-Rewrite-模块" class="headerlink" title="安装pcre(用于Nginx的HTTP Rewrite 模块)"></a>安装pcre(用于Nginx的HTTP Rewrite 模块)</h3><blockquote>
<p>注：若使用wget方式下载安装包可能会出现地址变更导致下载失败。<br>另一种方式：xftp可进行文件传输，本地下载好安装包后，利用xftp传输即可。</p>
</blockquote>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">cd /usr/<span class="keyword">local</span>/src </div><div class="line">wget ftp:<span class="comment">//ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.38.tar.gz  	   </span></div><div class="line">tar -zxvf pcre<span class="number">-8.38</span>.tar.gz <span class="meta">#解压文件</span></div><div class="line">mv pcre<span class="number">-8.38</span>   pcre <span class="meta">#修改解压后文件夹名称</span></div><div class="line">cd pcre</div><div class="line">./configure 		<span class="meta">#准备编译</span></div><div class="line"><span class="built_in">make</span> &amp; <span class="built_in">make</span> install	<span class="meta">#编译及安装</span></div></pre></td></tr></table></figure>
<h3 id="安装zilb-一个压缩和解压模块"><a href="#安装zilb-一个压缩和解压模块" class="headerlink" title="安装zilb(一个压缩和解压模块)"></a>安装zilb(一个压缩和解压模块)</h3><figure class="highlight nsis"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">cd /usr/local/src</div><div class="line">wget http://<span class="literal">zlib</span>.net/<span class="literal">zlib</span>-<span class="number">1.2</span>.<span class="number">8</span>.tar.gz</div><div class="line">tar -zxvf <span class="literal">zlib</span>-<span class="number">1.2</span>.<span class="number">8</span>.tar.gz</div><div class="line">mv <span class="literal">zlib</span>-<span class="number">1.2</span>.<span class="number">8</span> <span class="literal">zlib</span></div><div class="line">cd <span class="literal">zlib</span></div><div class="line">./configure</div><div class="line">make &amp; make install</div></pre></td></tr></table></figure>
<h3 id="安装SSl模块"><a href="#安装SSl模块" class="headerlink" title="安装SSl模块"></a>安装SSl模块</h3><blockquote>
<p>openssl是为网络通信提供安全及数据完整性的一种安全协议，囊括了主要的密码算法、常用的密钥和证书封装管理功能以及SSL协议，并提供了丰富的应用程序供测试或其它目的使用。</p>
</blockquote>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">cd /usr/<span class="keyword">local</span>/src</div><div class="line">wget http:<span class="comment">//www.openssl.org/source/openssl-1.0.1c.tar.gz</span></div><div class="line">tar -zxvf openssl<span class="number">-1.0</span><span class="number">.1</span>c.tar.gz</div><div class="line">mv openssl<span class="number">-1.0</span><span class="number">.1</span>c  openssl</div><div class="line">./config</div><div class="line"><span class="built_in">make</span> &amp; <span class="built_in">make</span> install</div></pre></td></tr></table></figure>
<h3 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">cd /usr/local/src</div><div class="line">wget http://nginx.org/download/nginx-1.9.9.tar.gz</div><div class="line">tar -zxvf nginx-1.9.9.tar.gz</div><div class="line">cd nginx-1.9.9</div><div class="line"></div><div class="line">./configure --sbin-path=/usr/local/nginx \</div><div class="line">-<span class="ruby">-conf-path=<span class="regexp">/usr/local</span><span class="regexp">/nginx/nginx</span>.conf \</span></div><div class="line">-<span class="ruby">-pid-path=<span class="regexp">/usr/local</span><span class="regexp">/nginx/nginx</span>.pid \</span></div><div class="line">-<span class="ruby">-with-http_ssl_module \</span></div><div class="line">-<span class="ruby">-with-http_v2_module \</span></div><div class="line">-<span class="ruby">-with-pcre=<span class="regexp">/usr/local</span><span class="regexp">/src/pcre</span> \</span></div><div class="line">-<span class="ruby">-with-zlib=<span class="regexp">/usr/local</span><span class="regexp">/src/zlib</span> \</span></div><div class="line">-<span class="ruby">-with-openssl=<span class="regexp">/usr/local</span><span class="regexp">/src/openssl</span></span></div><div class="line"></div><div class="line">make &amp; make install</div><div class="line"></div><div class="line">cd /usr/local/nginx #进入nginx目录</div><div class="line">nginx				#启动nginx</div></pre></td></tr></table></figure>
<p>启动后浏览器导航到<a href="http://IP" target="_blank" rel="external">http://IP</a> 就可以看到默认的欢迎界面了</p>
<h3 id="Nginx常用命令"><a href="#Nginx常用命令" class="headerlink" title="Nginx常用命令"></a>Nginx常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">nginx <span class="_">-s</span> stop停止nginx</div><div class="line">nginx 运行nginx</div><div class="line">nginx <span class="_">-s</span> reload 重启nginx</div><div class="line">nginx -t 测试nginx</div></pre></td></tr></table></figure>
<h3 id="nginx加入到环境变量"><a href="#nginx加入到环境变量" class="headerlink" title="nginx加入到环境变量"></a>nginx加入到环境变量</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">vim</span> /etc/<span class="keyword">profile</span></div></pre></td></tr></table></figure>
<p>尾行添加<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">PATH=<span class="variable">$PATH</span><span class="symbol">:/usr/local/nginx</span> <span class="comment">#nginx安装目录</span></div><div class="line">export PATH </div></pre></td></tr></table></figure><br>保存关闭后运行<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">source</span> <span class="regexp">/etc/</span>profile</div></pre></td></tr></table></figure></p>
<h3 id="修改网站默认根目录路径"><a href="#修改网站默认根目录路径" class="headerlink" title="修改网站默认根目录路径"></a>修改网站默认根目录路径</h3><blockquote>
<p>网站默认根目录放在/usr/local/nginx/html</p>
</blockquote>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /usr/<span class="keyword">local</span>/nginx/<span class="keyword">conf</span>/nginx.<span class="keyword">conf</span></div></pre></td></tr></table></figure>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">server</span> &#123;</div><div class="line">	listen       <span class="number">80</span>;</div><div class="line">	server_name  你的IP;</div><div class="line">	<span class="meta">#charset koi8-r;</span></div><div class="line"></div><div class="line">	<span class="meta">#access_log  logs/host.access.log  main;</span></div><div class="line">	location / &#123;</div><div class="line">	root  /www/blog/<span class="keyword">public</span>;</div><div class="line">	<span class="keyword">index</span> <span class="keyword">index</span>.html <span class="keyword">index</span>.htm;</div><div class="line">	&#125;</div><div class="line">	.</div><div class="line">	.</div><div class="line">	.</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>root添加自己想要的根目录，重启nginx生效。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[VPS搭建多端口VPN]]></title>
      <url>http://karson.cc/2016/12/20/vps/</url>
      <content type="html"><![CDATA[<blockquote>
<p>为了防止世界被破坏，为了守护世界的和平!<br>贯彻爱与真实的邪恶，可爱又迷人的反派角色!<br>世界辣么大~还不去看看！</p>
</blockquote>
<p><img src="/img/articleImg/naruto.jpg" alt=""><br><a id="more"></a></p>
<h2 id="所需"><a href="#所需" class="headerlink" title="所需"></a>所需</h2><p>1.他乡vps一台<br>2.xshell用于远程登录<br>3.shadowsocks应用程序。<a href="https://github.com/shadowsocks/shadowsocks-windows/releases" target="_blank" rel="external">点这里</a></p>
<h2 id="Ready"><a href="#Ready" class="headerlink" title="Ready."></a>Ready.</h2><p>1.本人装备的是搬瓦工的vps,好处是可以无限制的重装系统。<br>2.<a href="http://hostingset.com/" target="_blank" rel="external">购买VPS</a><br>3.打开xshell连接<br><img src="/img/articleImg/xshell.png" alt=""></p>
<h2 id="GO！！"><a href="#GO！！" class="headerlink" title="GO！！"></a>GO！！</h2><p>1.安装所需组件<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yum <span class="keyword">install</span> m2crypto python-setuptools</div><div class="line">easy_install pip</div><div class="line">pip <span class="keyword">install</span> shadowsocks</div></pre></td></tr></table></figure></p>
<p>2.新建配置文件：shadowsocks.json<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"server"</span>:<span class="string">"23.105.215.43"</span>,   <span class="comment">#你服务器的ip</span></div><div class="line">    <span class="string">"local_address"</span>:<span class="string">"127.0.0.1"</span>,</div><div class="line">    <span class="string">"local_port"</span>:<span class="number">1080</span>,</div><div class="line">    <span class="string">"port_password"</span>:&#123;           <span class="comment">#端口以及对应的密码</span></div><div class="line">         <span class="string">"9000"</span>:<span class="string">"password"</span>,</div><div class="line">         <span class="string">"9001"</span>:<span class="string">"password"</span>,</div><div class="line">         <span class="string">"9002"</span>:<span class="string">"password"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="string">"timeout"</span>:<span class="number">300</span>,</div><div class="line">    <span class="string">"method"</span>:<span class="string">"rc4-md5"</span>,         <span class="comment">#选择的加密方式</span></div><div class="line">    <span class="string">"fast_open"</span>: <span class="literal">false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><br>3添加<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ssserver -c /etc/shadowsocks<span class="selector-class">.json</span></div><div class="line"></div><div class="line">ssserver -c /etc/shadowsocks<span class="selector-class">.json</span> -d start  #后台运行</div></pre></td></tr></table></figure><br>4.开启shadowsocks应用程序，输入ip,端口号,密码。就OK啦~<br>5.Android用户想要连接本文配置的vpn,请搜下图app.<br><img src="/img/articleImg/shadowsocks.png" alt=""></p>
]]></content>
    </entry>
    
  
  
</search>
